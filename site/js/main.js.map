{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/js/main.js","src/js/modules/accordion.js","src/js/modules/anchor.js","src/js/modules/form-error-handler.js","src/js/modules/menu.js","src/js/modules/popup.js","src/js/modules/slider.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var Menu             = require('./modules/menu.js');\nvar Slider           = require('./modules/slider.js');\nvar Accordion        = require('./modules/accordion.js');\nvar Popup            = require('./modules/popup.js');\nvar Anchor           = require('./modules/anchor.js');\nvar formErrorHandler = require('./modules/form-error-handler.js');\n\n$(document).ready(function() {\n\n    var menu          = $('.menu:not(.menu_opened):not(.menu_catalog)');\n    var slider        = $('.slider:not(.slider_narrow)');\n    var sliderNarrow  = $('.slider.slider_narrow');\n    var popupSlider   = $('.popup-slider');\n    var menuOpened    = $('.menu.menu_opened');\n    var containerMore = $('.container-more');\n    var largeSlider   = $('.large-slider');\n    var accordion     = $('.accordion');\n    var parallax      = $('.parallax');\n    var anchor        = new Anchor('.scroll-to-top');\n    var popup         = new Popup();\n    var orderForm     = $('#order-form');\n    var callbackForm  = $('#callback-form');\n\n    if (menu.length) {\n        menu = new Menu(menu);\n    }\n\n    if (menuOpened.length) {\n        menuOpened = new Menu(menuOpened, {\n            alwaysOpen: true\n        });\n    }\n\n    if (slider.length) {\n        slider.each(function(index, el) {\n            new Slider(el);\n        });\n    }\n\n    if (sliderNarrow.length) {\n        sliderNarrow.each(function(index, el) {\n            new Slider(el);\n        });\n    }\n\n    if (largeSlider.length) {\n        largeSlider.find('.large-slider__slides').slick({\n            prevArrow: largeSlider.find('.large-slider__prev'),\n            nextArrow: largeSlider.find('.large-slider__next'),\n            slide: '.large-slide',\n            autoplay: true,\n            autoplySpeed: 7000\n        });\n    }\n\n    if (popupSlider.length) {\n        popupSlider.each(function(index, el) {\n            var $el = $(el);\n            $el.find('.popup-slider__slides').slick({\n                prevArrow: $el.find('.popup-slider__prev'),\n                nextArrow: $el.find('.popup-slider__next'),\n                autoplay: false\n            });\n        });\n    }\n\n    if (containerMore.length) {\n        containerMore.each(function(index, el) {\n            var button  = $(this).find('.container-more__btn');\n            var content = $(this).find('.container-more__content');\n            button.on('click', function(e) {\n                var text    = button.text();\n                var altText = button.attr('data-alt-text');\n                e.preventDefault();\n                content.slideToggle(400);\n                button.text(altText);\n                button.attr('data-alt-text', text);\n            });\n        });\n    }\n\n    $('.js-box').fancybox({\n        padding: 0,\n        margin: [40, 60, 20, 60],\n        nextEffect: 'fade',\n        prevEffect: 'fade',\n        openSpeed: 500,\n        closeSpeed: 300,\n        prevSpeed: 300,\n        nextSpeed: 300,\n        helpers: {\n            overlay: {\n                locked: false,\n                css: {\n                    background: 'rgba(12, 65, 158, 0.9)'\n                }\n            },\n        },\n        tpl: {\n            closeBtn: '<a title=\"Закрыть\" class=\"fancybox-item popup__close\" href=\"javascript:;\">Закрыть</a>',\n            next: '<a title=\"Следующий\" class=\"fancybox-nav popup-slider__next ico ico-slider-next\" href=\"javascript:;\"><span></span></a>',\n            prev: '<a title=\"Предыдущий\" class=\"fancybox-nav popup-slider__prev ico ico-slider-prev\" href=\"javascript:;\"><span></span></a>'\n        },\n        afterShow: function() {\n            var _ = this;\n            _.outer.swipe({\n                allowPageScroll: 'auto',\n                swipeLeft: function() {\n                    $.fancybox.prev();\n                },\n\n                swipeRight: function() {\n                    $.fancybox.next();\n                }\n            });\n        },\n\n        beforeClose: function() {\n            this.skin.addClass('is-close');\n        }\n    });\n\n    if (accordion.length) {\n        accordion.each(function(index, el) {\n            new Accordion(el);\n        });\n    }\n\n    $('[data-popup]').each(function() {\n        var $this = $(this);\n        $this.on('click', function(e) {\n            popup.open($this.data('popup'));\n        });\n    });\n\n    // order form validation\n    if (orderForm.length) {\n        orderForm.validate({\n            debug: true\n        });\n    }\n\n    // callback form validation\n    if (callbackForm.length) {\n        callbackForm.validate({\n            debug: true\n        });\n    }\n\n    // $('form .input')\n    //     .on('blur', function() {\n    //         var $this = $(this);\n    //         if ($this.val().length > 0) {\n    //             $this.addClass('is-dirty');\n    //         } else {\n    //             $this.removeClass('is-dirty');\n    //         }\n    //     })\n    //     .on('focus', function() {\n    //         var $this = $(this);\n    //         if ($this.hasClass('is-error')) {\n    //             $this.removeClass('is-error');\n    //         }\n    //     });\n\n});\n","function Accordion(element, config) {\n\n    this.options = {\n        item: '.accordion__item',\n        btn: '.accordion__btn',\n        content: '.accordion__content',\n        activeClass: 'is-active',\n        speed: 300\n    };\n\n    $.extend(this.options, config || {});\n\n    this.$el      = element instanceof jQuery ? element : $(element);\n    this.$item    = this.$el.find(this.options.item);\n    this.$btn     = this.$el.find(this.options.btn);\n\n    this.init();\n\n}\n\nAccordion.prototype = {\n\n    constructor: Accordion,\n\n    _initEvents: function() {\n        var _ = this;\n\n        _.$btn.on('click', function(e) {\n            var btn   = $(this);\n            var index = btn.index();\n            var content = btn.siblings(_.options.content);\n            e.preventDefault();\n            btn.toggleClass(_.options.activeClass);\n            content.slideToggle(_.options.speed);\n        });\n    },\n\n    init: function() {\n        this._initEvents();\n    }\n\n};\n\nmodule.exports = Accordion;\n","function Anchor(element, config) {\n\n    var _   = this;\n    var win = $(window);\n    var scrollPos = win.scrollTop();\n    var defaults = {\n        activeClass: 'is-active',\n        offset: 0,\n        scrollDuration: 500\n    };\n\n    _.$el     = element instanceof jQuery ? element : $(element);\n    _.active  = false;\n    _.options = $.extend(defaults, config || {});\n\n    _.init = function() {\n        _.visiblePos = _.$el.offset().top - win.height() - _.options.offset;\n        _.updateState();\n    };\n\n    _.updateState = function() {\n        if (!_.active && scrollPos >= _.visiblePos) {\n            _.$el.addClass(_.options.activeClass);\n            _.active = true;\n        } else if (_.active && scrollPos < _.visiblePos) {\n            _.$el.removeClass(_.options.activeClass);\n            _.active = false;\n        }\n    };\n\n    _.$el.on('click', function() {\n        $('html').animate({\n            scrollTop: 0\n        }, _.options.scrollDuration);\n        $('body').animate({\n            scrollTop: 0\n        }, _.options.scrollDuration);\n    });\n\n    win.on('scroll', function() {\n        scrollPos = win.scrollTop();\n        _.updateState();\n    });\n\n    win.on('resize', function() {\n        _.init();\n    });\n\n    _.init();\n\n}\n\nmodule.exports = Anchor;\n","module.exports = function(errors) {\n\n    var errorClass = 'is-error';\n\n    $.each(errors, function(index, error) {\n        error.element.classList.add(errorClass);\n        setTimeout(function() {\n            error.element.classList.remove(errorClass);\n        }, 1500);\n    });\n\n};\n","function Menu(element, options) {\n\n    this.config = {\n        button: '.menu__btn',\n        tab: '.menu__tab',\n        content: '.menu__content',\n        activeClass: 'is-active',\n        openClass: 'is-open',\n        stickyClass: 'is-fixed',\n        activeTab: 0,\n        alwaysOpen: false,\n        sticky: true\n    };\n\n    $.extend(this.config, options || {});\n\n    // 470px - height of menu\n    this.config.shiftY = this.config.alwaysOpen ? 470 : 0;\n\n    this.$el       = element instanceof jQuery ? element : $(element);\n    this.activeTab = this.config.activeTab;\n    this.opened    = false;\n    this.isFixed   = false;\n\n    // this.opened    = this.config.alwaysOpen ? true : false;\n\n    this.init();\n\n}\n\nMenu.prototype = {\n\n    constructor: Menu,\n\n    _initEvents: function() {\n        var _ = this;\n        this.$buttons.on('mouseover touchend', function(e) {\n            var btn   = $(this);\n            var index = $(this).index();\n\n            e.preventDefault();\n\n            if (e.type == 'touchend' && index === _.activeTab && _.opened) {\n                if (_.config.alwaysOpen) {\n                    if (_.isFixed) {\n                        console.log(_.isFixed);\n                        _.close();\n                    }\n                } else {\n                    _.close();\n                }\n\n                return;\n            }\n\n            if (!_.opened) {\n                _.toggleTabs(index);\n                _.open();\n            } else if (index !== _.activeTab) {\n                _.toggleTabs(index);\n            }\n\n        });\n\n        // this.$el.on('click', function(e) {\n        //     e.stopPropagation();\n        // });\n\n        this.$el.on('mouseleave', function() {\n            if (_.opened && !_.config.alwaysOpen) {\n                _.close();\n            }\n\n            if (_.opened && _.config.alwaysOpen && _.isFixed) {\n                _.close();\n            }\n        });\n\n        // $(document).on('click', function(e) {\n        //     console.log(e);\n        //     if (_.opened && _.alwaysOpen && _.isFixed) {\n        //         _.close();\n        //     } else if (_.opened && !_.alwaysOpen) {\n        //         _.close();\n        //     }\n        // });\n    },\n\n    _initModEvents: function() {\n        var _ = this;\n        this.$buttons.on('mouseover touchend', function(e) {\n            var index = $(this).index();\n            e.preventDefault();\n            if (index !== _.activeTab) {\n                _.toggleTabs(index);\n            }\n        });\n    },\n\n    toggleTabs: function(index) {\n        var _ = this;\n        $(_.$buttons[_.activeTab]).removeClass(_.config.activeClass);\n        $(_.$buttons[index]).addClass(_.config.activeClass);\n        $(_.$tabs[_.activeTab]).removeClass(_.config.activeClass);\n        $(_.$tabs[index]).addClass(_.config.activeClass);\n        _.activeTab = index;\n    },\n\n    makeSticky: function() {\n        var _      = this;\n        var win    = $(window);\n        var scroll = win.scrollTop();\n        var scrollDirection;\n        var offset = _.$el.offset().top + _.config.shiftY;\n\n        win.on('scroll', function() {\n            var updatedScroll = win.scrollTop();\n            if (updatedScroll >= scroll) {\n                scrollDirection = 'FORVARD';\n            } else {\n                scrollDirection = 'BACKWARD';\n            }\n\n            scroll = win.scrollTop();\n\n            if (scrollDirection == 'FORVARD' && scroll > offset && !_.isFixed) {\n                _._toggleFixedPosition();\n            }\n\n            if (scrollDirection == 'BACKWARD' && scroll <= offset && _.isFixed) {\n                _._toggleFixedPosition();\n            }\n        });\n    },\n\n    _toggleFixedPosition: function() {\n        var _ = this;\n        if (_.config.alwaysOpen) {\n            if (_.isFixed) {\n                _.$el.removeClass(_.config.stickyClass);\n                _.open(0, 0);\n                _.isFixed = false;\n            } else {\n                _.close(0);\n                _.$el.css('top', -67);\n                _.$el.addClass(_.config.stickyClass);\n                _.$el.animate({top: 0}, 300, function() {\n                    _.$el.css('top', '');\n                });\n\n                _.isFixed = true;\n            }\n        } else {\n            if (_.isFixed) {\n                _.$el.removeClass(_.config.stickyClass);\n                _.isFixed = false;\n            } else {\n                _.$el.addClass(_.config.stickyClass);\n                _.close(0);\n                _.isFixed = true;\n            }\n        }\n    },\n\n    open: function(duration, index) {\n        if (this.opened) return;\n\n        var _        = this;\n        var duration = $.isNumeric(duration) ? duration : 300;\n\n        _.$content.slideDown({\n            duration: duration,\n            start: function() {\n                setTimeout(function() {\n                    _.$el.addClass(_.config.openClass);\n                }, 100);\n\n                if ($.isNumeric(index)) {\n                    _.toggleTabs(index);\n                }\n            },\n\n            complete: function() {\n                _.opened = true;\n            },\n        });\n    },\n\n    close: function(duration) {\n        if (!this.opened) return;\n\n        var _        = this;\n        var duration = $.isNumeric(duration) ? duration : 300;\n\n        _.$content.slideUp({\n            duration: duration,\n            start: function() {\n                setTimeout(function() {\n                    $(_.$buttons[_.activeTab]).removeClass(_.config.activeClass);\n                }, 200);\n            },\n\n            complete: function() {\n                _.$el.removeClass(_.config.openClass);\n                _.opened = false;\n            },\n        });\n    },\n\n    init: function() {\n        var _ = this;\n        _.$buttons = _.$el.find(_.config.button);\n        _.$tabs    = _.$el.find(_.config.tab);\n        _.$content = _.$el.find(_.config.content);\n\n        // if (_.config.alwaysOpen) {\n        //     _._initModEvents();\n        //     _.toggleTabs(_.activeTab);\n        // } else {\n        //     _._initEvents();\n        //     _.$content.slideUp();\n        // }\n\n        if (_.config.alwaysOpen) {\n            _.toggleTabs(_.activeTab);\n            _.open();\n        } else {\n            _.$content.slideUp();\n        }\n\n        _._initEvents();\n\n        if (_.config.sticky) {\n            _.makeSticky();\n        }\n    }\n\n};\n\nmodule.exports = Menu;\n","function Popup(options) {\n\n    var defaults, opt;\n    var _ = this;\n\n    defaults = {\n        duration: 300,\n        popupSelector: '.popup',\n        innerSelector: '.popup__inner',\n        closePopupSelector: '.js-popup-close, .popup__close',\n        activeClass: 'is-active',\n        enableEvents: true\n    };\n\n    _.options = opt = $.extend(defaults, options || {});\n\n    _.open = function(element) {\n        var popup = element instanceof jQuery ? element : $(element);\n\n        popup.fadeIn({\n            duration: opt.duration,\n            complete: function() {\n                popup.addClass(opt.activeClass);\n            }\n        });\n    };\n\n    _.close = function(element) {\n        var popup = element instanceof jQuery ? element : $(element);\n\n        if (!popup.hasClass(opt.activeClass)) return;\n\n        popup\n            .removeClass(opt.activeClass)\n            .delay(opt.duration)\n            .fadeOut({\n                duration: opt.duration\n            });\n    };\n\n    _.initEvents = function() {\n        $(opt.closePopupSelector).on('click', function(e) {\n            e.preventDefault();\n            _.close($(this).parents(opt.popupSelector));\n        });\n\n        $(opt.popupSelector).on('click', function() {\n            _.close(this);\n        });\n\n        $(opt.innerSelector).on('click', function(e) {\n            e.stopPropagation();\n        });\n    };\n\n    if (opt.enableEvents) {\n        _.initEvents();\n    }\n\n}\n\nmodule.exports = Popup;\n","function Slider(element, config) {\n\n    var slickOptions;\n\n    this.$el = element instanceof jQuery ? element : $(element);\n    this.$slider = this.$el.find('.slider__slides');\n\n    defaults = {\n        autoplay: true,\n        autoplaySpeed: 5000,\n        fade: false,\n        arrows: true,\n        dots: false,\n        slide: '.slide',\n        prevArrow: this.$el.find('.slider__prev'),\n        nextArrow: this.$el.find('.slider__next')\n    };\n\n    slickOptions = $.extend(defaults, config || {});\n\n    this.$slider.slick(slickOptions);\n\n    // this.init();\n\n    return this;\n\n}\n\nSlider.prototype = {\n\n    constructor: Slider,\n\n    init: function() {\n        console.log(this);\n    }\n\n};\n\nmodule.exports = Slider;\n"]}